<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Class FMIndex | BelNytheraSeiche.WaveletMatrix </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Class FMIndex | BelNytheraSeiche.WaveletMatrix ">
      
      <meta name="description" content="Provides a high-performance full-text search index based on the FM-Index algorithm. This implementation supports both a full Suffix Array mode for fast locating and a memory-efficient sampling mode.">
      <link rel="icon" href="../images/favicon.ico">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="../toc.html">
      <meta name="docfx:tocrel" content="toc.html">
      
      <meta name="docfx:rel" content="../">
      
      
      <meta name="docfx:docurl" content="https://github.com/belnytheraseiche/WaveletMatrix/new/main/apiSpec/new?filename=BelNytheraSeiche_WaveletMatrix_FMIndex.md&amp;value=---%0Auid%3A%20BelNytheraSeiche.WaveletMatrix.FMIndex%0Asummary%3A%20&#39;*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax&#39;%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="ManagedReference">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../index.html">
            <img id="logo" class="svg" src="../images/logo-small.png" alt="BelNytheraSeiche.WaveletMatrix">
            BelNytheraSeiche.WaveletMatrix
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="BelNytheraSeiche.WaveletMatrix.FMIndex">



  <h1 id="BelNytheraSeiche_WaveletMatrix_FMIndex" data-uid="BelNytheraSeiche.WaveletMatrix.FMIndex" class="text-break">
Class FMIndex  <a class="header-action link-secondary" title="View source" href="https://github.com/belnytheraseiche/WaveletMatrix/blob/main/src/FMIndex.cs/#L38"><i class="bi bi-code-slash"></i></a>
  </h1>

  <div class="facts text-secondary">
    <dl><dt>Namespace</dt><dd><a class="xref" href="BelNytheraSeiche.html">BelNytheraSeiche</a>.<a class="xref" href="BelNytheraSeiche.WaveletMatrix.html">WaveletMatrix</a></dd></dl>
  <dl><dt>Assembly</dt><dd>BelNytheraSeiche.WaveletMatrix.dll</dd></dl>
  </div>

  <div class="markdown summary"><p>Provides a high-performance full-text search index based on the FM-Index algorithm.
This implementation supports both a full Suffix Array mode for fast locating and a memory-efficient sampling mode.</p>
</div>
  <div class="markdown conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public sealed class FMIndex</code></pre>
  </div>




  <dl class="typelist inheritance">
    <dt>Inheritance</dt>
    <dd>
      <div><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object">object</a></div>
      <div><span class="xref">FMIndex</span></div>
    </dd>
  </dl>



  <dl class="typelist inheritedMembers">
    <dt>Inherited Members</dt>
    <dd>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.equals#system-object-equals(system-object)">object.Equals(object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.equals#system-object-equals(system-object-system-object)">object.Equals(object, object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.gethashcode">object.GetHashCode()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.gettype">object.GetType()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.referenceequals">object.ReferenceEquals(object, object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.tostring">object.ToString()</a>
    </div>
  </dd></dl>




  <h2 id="BelNytheraSeiche_WaveletMatrix_FMIndex_remarks">Remarks</h2>
  <div class="markdown level0 remarks"><p>The FM-Index is a compressed full-text index that allows for fast counting (<a class="xref" href="BelNytheraSeiche.WaveletMatrix.FMIndex.html#BelNytheraSeiche_WaveletMatrix_FMIndex_Count_System_ReadOnlySpan_System_Char__">Count(ReadOnlySpan&lt;char&gt;)</a>) and locating (<a class="xref" href="BelNytheraSeiche.WaveletMatrix.FMIndex.html#BelNytheraSeiche_WaveletMatrix_FMIndex_Locate_System_ReadOnlySpan_System_Char__BelNytheraSeiche_WaveletMatrix_FMIndex_SortOrder_">Locate(ReadOnlySpan&lt;char&gt;, SortOrder)</a>)
of patterns within a large text. It is constructed using the Burrows-Wheeler Transform (BWT), a Wavelet Matrix, and a Suffix Array.</p>
</div>


  <h2 class="section" id="properties">Properties
</h2>


  <a id="BelNytheraSeiche_WaveletMatrix_FMIndex_IsSampled_" data-uid="BelNytheraSeiche.WaveletMatrix.FMIndex.IsSampled*"></a>

  <h3 id="BelNytheraSeiche_WaveletMatrix_FMIndex_IsSampled" data-uid="BelNytheraSeiche.WaveletMatrix.FMIndex.IsSampled">
  IsSampled
  <a class="header-action link-secondary" title="View source" href="https://github.com/belnytheraseiche/WaveletMatrix/blob/main/src/FMIndex.cs/#L72"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Gets a value indicating whether the index is using Suffix Array sampling.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public bool IsSampled { get; }</code></pre>
  </div>





  <h4 class="section">Property Value</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.boolean">bool</a></dt>
    <dd></dd>
  </dl>








  <a id="BelNytheraSeiche_WaveletMatrix_FMIndex_SA_" data-uid="BelNytheraSeiche.WaveletMatrix.FMIndex.SA*"></a>

  <h3 id="BelNytheraSeiche_WaveletMatrix_FMIndex_SA" data-uid="BelNytheraSeiche.WaveletMatrix.FMIndex.SA">
  SA
  <a class="header-action link-secondary" title="View source" href="https://github.com/belnytheraseiche/WaveletMatrix/blob/main/src/FMIndex.cs/#L67"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Gets the underlying Suffix Array instance used by this index.
This property is only available when the index is built in full Suffix Array mode (i.e., when <a class="xref" href="BelNytheraSeiche.WaveletMatrix.FMIndex.html#BelNytheraSeiche_WaveletMatrix_FMIndex_IsSampled">IsSampled</a> is <code>false</code>).</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public SuffixArray SA { get; }</code></pre>
  </div>





  <h4 class="section">Property Value</h4>
  <dl class="parameters">
    <dt><a class="xref" href="BelNytheraSeiche.WaveletMatrix.SuffixArray.html">SuffixArray</a></dt>
    <dd></dd>
  </dl>





  <h4 class="section">Exceptions</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.invalidoperationexception">InvalidOperationException</a></dt>
    <dd><p>Thrown if the index is in sampling mode.</p>
</dd>
  </dl>



  <a id="BelNytheraSeiche_WaveletMatrix_FMIndex_Text_" data-uid="BelNytheraSeiche.WaveletMatrix.FMIndex.Text*"></a>

  <h3 id="BelNytheraSeiche_WaveletMatrix_FMIndex_Text" data-uid="BelNytheraSeiche.WaveletMatrix.FMIndex.Text">
  Text
  <a class="header-action link-secondary" title="View source" href="https://github.com/belnytheraseiche/WaveletMatrix/blob/main/src/FMIndex.cs/#L55"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Gets the original source text used to build the index, excluding the internal terminator character.
This property is only available when the index is built in full Suffix Array mode (i.e., when <a class="xref" href="BelNytheraSeiche.WaveletMatrix.FMIndex.html#BelNytheraSeiche_WaveletMatrix_FMIndex_IsSampled">IsSampled</a> is <code>false</code>).</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public ReadOnlyMemory&lt;char&gt; Text { get; }</code></pre>
  </div>





  <h4 class="section">Property Value</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.readonlymemory-1">ReadOnlyMemory</a>&lt;<a class="xref" href="https://learn.microsoft.com/dotnet/api/system.char">char</a>&gt;</dt>
    <dd></dd>
  </dl>





  <h4 class="section">Exceptions</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.invalidoperationexception">InvalidOperationException</a></dt>
    <dd><p>Thrown if the index is in sampling mode.</p>
</dd>
  </dl>



  <a id="BelNytheraSeiche_WaveletMatrix_FMIndex_WM_" data-uid="BelNytheraSeiche.WaveletMatrix.FMIndex.WM*"></a>

  <h3 id="BelNytheraSeiche_WaveletMatrix_FMIndex_WM" data-uid="BelNytheraSeiche.WaveletMatrix.FMIndex.WM">
  WM
  <a class="header-action link-secondary" title="View source" href="https://github.com/belnytheraseiche/WaveletMatrix/blob/main/src/FMIndex.cs/#L60"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Gets the underlying Wavelet Matrix instance used by this index.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public WaveletMatrixGeneric&lt;char&gt; WM { get; }</code></pre>
  </div>





  <h4 class="section">Property Value</h4>
  <dl class="parameters">
    <dt><a class="xref" href="BelNytheraSeiche.WaveletMatrix.WaveletMatrixGeneric-1.html">WaveletMatrixGeneric</a>&lt;<a class="xref" href="https://learn.microsoft.com/dotnet/api/system.char">char</a>&gt;</dt>
    <dd></dd>
  </dl>








  <h2 class="section" id="methods">Methods
</h2>


  <a id="BelNytheraSeiche_WaveletMatrix_FMIndex_Count_" data-uid="BelNytheraSeiche.WaveletMatrix.FMIndex.Count*"></a>

  <h3 id="BelNytheraSeiche_WaveletMatrix_FMIndex_Count_System_ReadOnlySpan_System_Char__" data-uid="BelNytheraSeiche.WaveletMatrix.FMIndex.Count(System.ReadOnlySpan{System.Char})">
  Count(ReadOnlySpan&lt;char&gt;)
  <a class="header-action link-secondary" title="View source" href="https://github.com/belnytheraseiche/WaveletMatrix/blob/main/src/FMIndex.cs/#L519"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Counts the number of occurrences of a pattern within the text.
This operation is extremely fast, with performance proportional to the pattern length, not the text length.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public int Count(ReadOnlySpan&lt;char&gt; pattern)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>pattern</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.readonlyspan-1">ReadOnlySpan</a>&lt;<a class="xref" href="https://learn.microsoft.com/dotnet/api/system.char">char</a>&gt;</dt>
    <dd><p>The pattern to search for.</p>
</dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.int32">int</a></dt>
    <dd><p>The total number of non-overlapping occurrences of the pattern.</p>
</dd>
  </dl>











  <a id="BelNytheraSeiche_WaveletMatrix_FMIndex_Create_" data-uid="BelNytheraSeiche.WaveletMatrix.FMIndex.Create*"></a>

  <h3 id="BelNytheraSeiche_WaveletMatrix_FMIndex_Create_System_ReadOnlyMemory_System_Char__System_Int32_" data-uid="BelNytheraSeiche.WaveletMatrix.FMIndex.Create(System.ReadOnlyMemory{System.Char},System.Int32)">
  Create(ReadOnlyMemory&lt;char&gt;, int)
  <a class="header-action link-secondary" title="View source" href="https://github.com/belnytheraseiche/WaveletMatrix/blob/main/src/FMIndex.cs/#L112"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Creates a new instance of the <a class="xref" href="BelNytheraSeiche.WaveletMatrix.FMIndex.html">FMIndex</a> from a read-only memory segment of characters, with an optional Suffix Array sampling rate.
An internal terminator character ('\0') is appended to the text for correctness.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public static FMIndex Create(ReadOnlyMemory&lt;char&gt; text, int sampleRate = 0)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>text</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.readonlymemory-1">ReadOnlyMemory</a>&lt;<a class="xref" href="https://learn.microsoft.com/dotnet/api/system.char">char</a>&gt;</dt>
    <dd><p>The text to be indexed.</p>
</dd>
    <dt><code>sampleRate</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.int32">int</a></dt>
    <dd><p>The sampling rate for the Suffix Array. If 0 (default), the full Suffix Array is stored for fast locating.
If greater than 1, only every N-th entry of the Suffix Array is stored, saving memory at the cost of slower locate operations.</p>
</dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="BelNytheraSeiche.WaveletMatrix.FMIndex.html">FMIndex</a></dt>
    <dd><p>A new, fully initialized <a class="xref" href="BelNytheraSeiche.WaveletMatrix.FMIndex.html">FMIndex</a> instance.</p>
</dd>
  </dl>








  <h4 class="section">Exceptions</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.argumentoutofrangeexception">ArgumentOutOfRangeException</a></dt>
    <dd><p>Thrown if <code class="paramref">sampleRate</code> is less than 0.</p>
</dd>
  </dl>



  <a id="BelNytheraSeiche_WaveletMatrix_FMIndex_Create_" data-uid="BelNytheraSeiche.WaveletMatrix.FMIndex.Create*"></a>

  <h3 id="BelNytheraSeiche_WaveletMatrix_FMIndex_Create_System_String_System_Int32_" data-uid="BelNytheraSeiche.WaveletMatrix.FMIndex.Create(System.String,System.Int32)">
  Create(string, int)
  <a class="header-action link-secondary" title="View source" href="https://github.com/belnytheraseiche/WaveletMatrix/blob/main/src/FMIndex.cs/#L98"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Creates a new instance of the <a class="xref" href="BelNytheraSeiche.WaveletMatrix.FMIndex.html">FMIndex</a> from a string, with an optional Suffix Array sampling rate.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public static FMIndex Create(string text, int sampleRate = 0)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>text</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.string">string</a></dt>
    <dd><p>The text to be indexed.</p>
</dd>
    <dt><code>sampleRate</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.int32">int</a></dt>
    <dd><p>The sampling rate for the Suffix Array. If 0 (default), the full Suffix Array is stored for fast locating.
If greater than 1, only every N-th entry of the Suffix Array is stored to save memory, at the cost of slower locate operations.</p>
</dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="BelNytheraSeiche.WaveletMatrix.FMIndex.html">FMIndex</a></dt>
    <dd><p>A new, fully initialized <a class="xref" href="BelNytheraSeiche.WaveletMatrix.FMIndex.html">FMIndex</a> instance.</p>
</dd>
  </dl>








  <h4 class="section">Exceptions</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.argumentnullexception">ArgumentNullException</a></dt>
    <dd><p>Thrown if <code class="paramref">text</code> is null.</p>
</dd>
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.argumentoutofrangeexception">ArgumentOutOfRangeException</a></dt>
    <dd><p>Thrown if <code class="paramref">sampleRate</code> is less than 0.</p>
</dd>
  </dl>



  <a id="BelNytheraSeiche_WaveletMatrix_FMIndex_Deserialize_" data-uid="BelNytheraSeiche.WaveletMatrix.FMIndex.Deserialize*"></a>

  <h3 id="BelNytheraSeiche_WaveletMatrix_FMIndex_Deserialize_System_Byte___" data-uid="BelNytheraSeiche.WaveletMatrix.FMIndex.Deserialize(System.Byte[])">
  Deserialize(byte[])
  <a class="header-action link-secondary" title="View source" href="https://github.com/belnytheraseiche/WaveletMatrix/blob/main/src/FMIndex.cs/#L385"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Deserializes a byte array into a <a class="xref" href="BelNytheraSeiche.WaveletMatrix.FMIndex.html">FMIndex</a> instance.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public static FMIndex Deserialize(byte[] data)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>data</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.byte">byte</a>[]</dt>
    <dd><p>The byte array containing the serialized data.</p>
</dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="BelNytheraSeiche.WaveletMatrix.FMIndex.html">FMIndex</a></dt>
    <dd><p>A new, deserialized instance of <a class="xref" href="BelNytheraSeiche.WaveletMatrix.FMIndex.html">FMIndex</a>.</p>
</dd>
  </dl>








  <h4 class="section">Exceptions</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.argumentnullexception">ArgumentNullException</a></dt>
    <dd><p>Thrown if <code class="paramref">data</code> is null.</p>
</dd>
  </dl>



  <a id="BelNytheraSeiche_WaveletMatrix_FMIndex_Deserialize_" data-uid="BelNytheraSeiche.WaveletMatrix.FMIndex.Deserialize*"></a>

  <h3 id="BelNytheraSeiche_WaveletMatrix_FMIndex_Deserialize_System_IO_Stream_" data-uid="BelNytheraSeiche.WaveletMatrix.FMIndex.Deserialize(System.IO.Stream)">
  Deserialize(Stream)
  <a class="header-action link-secondary" title="View source" href="https://github.com/belnytheraseiche/WaveletMatrix/blob/main/src/FMIndex.cs/#L425"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Deserializes a <a class="xref" href="BelNytheraSeiche.WaveletMatrix.FMIndex.html">FMIndex</a> instance from a stream.
It verifies the file format, type identifier, and checksum.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public static FMIndex Deserialize(Stream stream)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>stream</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.io.stream">Stream</a></dt>
    <dd><p>The stream to read the serialized data from.</p>
</dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="BelNytheraSeiche.WaveletMatrix.FMIndex.html">FMIndex</a></dt>
    <dd><p>A new, deserialized instance.</p>
</dd>
  </dl>








  <h4 class="section">Exceptions</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.argumentnullexception">ArgumentNullException</a></dt>
    <dd><p>Thrown if <code class="paramref">stream</code> is null.</p>
</dd>
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.io.invaliddataexception">InvalidDataException</a></dt>
    <dd><p>Thrown if the data format is unsupported, the type is incompatible, or the data is corrupt.</p>
</dd>
  </dl>



  <a id="BelNytheraSeiche_WaveletMatrix_FMIndex_Deserialize_" data-uid="BelNytheraSeiche.WaveletMatrix.FMIndex.Deserialize*"></a>

  <h3 id="BelNytheraSeiche_WaveletMatrix_FMIndex_Deserialize_System_String_" data-uid="BelNytheraSeiche.WaveletMatrix.FMIndex.Deserialize(System.String)">
  Deserialize(string)
  <a class="header-action link-secondary" title="View source" href="https://github.com/belnytheraseiche/WaveletMatrix/blob/main/src/FMIndex.cs/#L404"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Deserializes a <a class="xref" href="BelNytheraSeiche.WaveletMatrix.FMIndex.html">FMIndex</a> instance from the specified file.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public static FMIndex Deserialize(string file)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>file</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.string">string</a></dt>
    <dd><p>The path of the file to read from.</p>
</dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="BelNytheraSeiche.WaveletMatrix.FMIndex.html">FMIndex</a></dt>
    <dd><p>A new, deserialized instance.</p>
</dd>
  </dl>








  <h4 class="section">Exceptions</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.argumentnullexception">ArgumentNullException</a></dt>
    <dd><p>Thrown if <code class="paramref">file</code> is null.</p>
</dd>
  </dl>



  <a id="BelNytheraSeiche_WaveletMatrix_FMIndex_GetSnippet_" data-uid="BelNytheraSeiche.WaveletMatrix.FMIndex.GetSnippet*"></a>

  <h3 id="BelNytheraSeiche_WaveletMatrix_FMIndex_GetSnippet_System_Int32_System_Int32_System_Int32_System_Double_" data-uid="BelNytheraSeiche.WaveletMatrix.FMIndex.GetSnippet(System.Int32,System.Int32,System.Int32,System.Double)">
  GetSnippet(int, int, int, double)
  <a class="header-action link-secondary" title="View source" href="https://github.com/belnytheraseiche/WaveletMatrix/blob/main/src/FMIndex.cs/#L658"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Calculates the location and optionally extracts the content of a text snippet surrounding a specified position.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public FMIndex.Snippet GetSnippet(int position, int keyLength, int totalLength, double leadingRatio = 0.5)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>position</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.int32">int</a></dt>
    <dd><p>The zero-based starting position of the keyword in the original text.</p>
</dd>
    <dt><code>keyLength</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.int32">int</a></dt>
    <dd><p>The length of the keyword.</p>
</dd>
    <dt><code>totalLength</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.int32">int</a></dt>
    <dd><p>The desired total length of the snippet.</p>
</dd>
    <dt><code>leadingRatio</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.double">double</a></dt>
    <dd><p>The desired proportion (0.0 to 1.0) of the context text to appear before the keyword. Defaults to 0.5 for centering the keyword.</p>
</dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="BelNytheraSeiche.WaveletMatrix.FMIndex.html">FMIndex</a>.<a class="xref" href="BelNytheraSeiche.WaveletMatrix.FMIndex.Snippet.html">Snippet</a></dt>
    <dd><p>A <a class="xref" href="BelNytheraSeiche.WaveletMatrix.FMIndex.Snippet.html">FMIndex.Snippet</a> record containing the location, length, and (in non-sampling mode) the text content of the snippet.</p>
</dd>
  </dl>







  <h4 class="section" id="BelNytheraSeiche_WaveletMatrix_FMIndex_GetSnippet_System_Int32_System_Int32_System_Int32_System_Double__remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>In full Suffix Array mode, the <a class="xref" href="BelNytheraSeiche.WaveletMatrix.FMIndex.Snippet.html#BelNytheraSeiche_WaveletMatrix_FMIndex_Snippet_Text">Text</a> property of the returned record will contain the extracted string.
In sampling mode, the <a class="xref" href="BelNytheraSeiche.WaveletMatrix.FMIndex.Snippet.html#BelNytheraSeiche_WaveletMatrix_FMIndex_Snippet_Text">Text</a> property will be <code>null</code>, but the location properties (<a class="xref" href="BelNytheraSeiche.WaveletMatrix.FMIndex.Snippet.html#BelNytheraSeiche_WaveletMatrix_FMIndex_Snippet_Index">Index</a>, <a class="xref" href="BelNytheraSeiche.WaveletMatrix.FMIndex.Snippet.html#BelNytheraSeiche_WaveletMatrix_FMIndex_Snippet_Length">Length</a>, <a class="xref" href="BelNytheraSeiche.WaveletMatrix.FMIndex.Snippet.html#BelNytheraSeiche_WaveletMatrix_FMIndex_Snippet_KeyPosition">KeyPosition</a>)
will be correctly calculated, allowing the caller to extract the snippet from their own copy of the source text.
The specified <code class="paramref">leadingRatio</code> is a guideline. The method prioritizes returning a snippet of approximately
<code class="paramref">totalLength</code>. If the keyword is near the start or end of the text, the actual ratio of leading/trailing
context will be adjusted to fill the requested length.</p>
</div>

  <h4 class="section">Exceptions</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.argumentoutofrangeexception">ArgumentOutOfRangeException</a></dt>
    <dd><p>Thrown if <code class="paramref">position</code>, <code class="paramref">keyLength</code>, <code class="paramref">totalLength</code> are invalid, or if <code class="paramref">leadingRatio</code> is not between 0.0 and 1.0.</p>
</dd>
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.argumentexception">ArgumentException</a></dt>
    <dd><p>Thrown if <code class="paramref">position</code> + <code class="paramref">keyLength</code> is greater than the length of the text.</p>
</dd>
  </dl>



  <a id="BelNytheraSeiche_WaveletMatrix_FMIndex_Locate_" data-uid="BelNytheraSeiche.WaveletMatrix.FMIndex.Locate*"></a>

  <h3 id="BelNytheraSeiche_WaveletMatrix_FMIndex_Locate_System_ReadOnlySpan_System_Char__BelNytheraSeiche_WaveletMatrix_FMIndex_SortOrder_" data-uid="BelNytheraSeiche.WaveletMatrix.FMIndex.Locate(System.ReadOnlySpan{System.Char},BelNytheraSeiche.WaveletMatrix.FMIndex.SortOrder)">
  Locate(ReadOnlySpan&lt;char&gt;, SortOrder)
  <a class="header-action link-secondary" title="View source" href="https://github.com/belnytheraseiche/WaveletMatrix/blob/main/src/FMIndex.cs/#L537"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Finds all starting positions of a pattern within the text.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public IEnumerable&lt;int&gt; Locate(ReadOnlySpan&lt;char&gt; pattern, FMIndex.SortOrder sortOrder = SortOrder.Ascending)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>pattern</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.readonlyspan-1">ReadOnlySpan</a>&lt;<a class="xref" href="https://learn.microsoft.com/dotnet/api/system.char">char</a>&gt;</dt>
    <dd><p>The pattern to search for.</p>
</dd>
    <dt><code>sortOrder</code> <a class="xref" href="BelNytheraSeiche.WaveletMatrix.FMIndex.html">FMIndex</a>.<a class="xref" href="BelNytheraSeiche.WaveletMatrix.FMIndex.SortOrder.html">SortOrder</a></dt>
    <dd><p>Specifies the order of the returned positions. Defaults to <a class="xref" href="BelNytheraSeiche.WaveletMatrix.FMIndex.SortOrder.html#BelNytheraSeiche_WaveletMatrix_FMIndex_SortOrder_Ascending">Ascending</a>.</p>
</dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.collections.generic.ienumerable-1">IEnumerable</a>&lt;<a class="xref" href="https://learn.microsoft.com/dotnet/api/system.int32">int</a>&gt;</dt>
    <dd><p>An enumerable collection of the zero-based starting positions of all occurrences.</p>
</dd>
  </dl>







  <h4 class="section" id="BelNytheraSeiche_WaveletMatrix_FMIndex_Locate_System_ReadOnlySpan_System_Char__BelNytheraSeiche_WaveletMatrix_FMIndex_SortOrder__remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>In full Suffix Array mode, this operation is very fast. In sampling mode, locating each position requires additional
computation (LF-mapping steps), making it slower but significantly more memory-efficient.
Specifying <a class="xref" href="BelNytheraSeiche.WaveletMatrix.FMIndex.SortOrder.html#BelNytheraSeiche_WaveletMatrix_FMIndex_SortOrder_Ascending">Ascending</a> or <a class="xref" href="BelNytheraSeiche.WaveletMatrix.FMIndex.SortOrder.html#BelNytheraSeiche_WaveletMatrix_FMIndex_SortOrder_Descending">Descending</a> may require collecting all results
and sorting them, which incurs a performance cost. For the highest performance where order is not important, use <a class="xref" href="BelNytheraSeiche.WaveletMatrix.FMIndex.SortOrder.html#BelNytheraSeiche_WaveletMatrix_FMIndex_SortOrder_Unordered">Unordered</a>.</p>
</div>




  <a id="BelNytheraSeiche_WaveletMatrix_FMIndex_RestoreSourceText_" data-uid="BelNytheraSeiche.WaveletMatrix.FMIndex.RestoreSourceText*"></a>

  <h3 id="BelNytheraSeiche_WaveletMatrix_FMIndex_RestoreSourceText" data-uid="BelNytheraSeiche.WaveletMatrix.FMIndex.RestoreSourceText">
  RestoreSourceText()
  <a class="header-action link-secondary" title="View source" href="https://github.com/belnytheraseiche/WaveletMatrix/blob/main/src/FMIndex.cs/#L622"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Reconstructs the original source text from the compressed index by inverting the Burrows-Wheeler Transform.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public string RestoreSourceText()</code></pre>
  </div>


  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.string">string</a></dt>
    <dd><p>The original text that was used to create the index.</p>
</dd>
  </dl>











  <a id="BelNytheraSeiche_WaveletMatrix_FMIndex_Serialize_" data-uid="BelNytheraSeiche.WaveletMatrix.FMIndex.Serialize*"></a>

  <h3 id="BelNytheraSeiche_WaveletMatrix_FMIndex_Serialize_BelNytheraSeiche_WaveletMatrix_FMIndex_BelNytheraSeiche_WaveletMatrix_SerializationOptions_" data-uid="BelNytheraSeiche.WaveletMatrix.FMIndex.Serialize(BelNytheraSeiche.WaveletMatrix.FMIndex,BelNytheraSeiche.WaveletMatrix.SerializationOptions)">
  Serialize(FMIndex, SerializationOptions?)
  <a class="header-action link-secondary" title="View source" href="https://github.com/belnytheraseiche/WaveletMatrix/blob/main/src/FMIndex.cs/#L181"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Serializes the <a class="xref" href="BelNytheraSeiche.WaveletMatrix.FMIndex.html">FMIndex</a> instance into a byte array.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public static byte[] Serialize(FMIndex obj, SerializationOptions? options = null)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>obj</code> <a class="xref" href="BelNytheraSeiche.WaveletMatrix.FMIndex.html">FMIndex</a></dt>
    <dd><p>The instance to serialize.</p>
</dd>
    <dt><code>options</code> <a class="xref" href="BelNytheraSeiche.WaveletMatrix.SerializationOptions.html">SerializationOptions</a></dt>
    <dd><p>Serialization options, such as the compression level.
If null, <a class="xref" href="BelNytheraSeiche.WaveletMatrix.SerializationOptions.html#BelNytheraSeiche_WaveletMatrix_SerializationOptions_Default">Default</a> will be used.</p>
</dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.byte">byte</a>[]</dt>
    <dd><p>A byte array containing the serialized data.</p>
</dd>
  </dl>








  <h4 class="section">Exceptions</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.argumentnullexception">ArgumentNullException</a></dt>
    <dd><p>Thrown if <code class="paramref">obj</code> is null.</p>
</dd>
  </dl>



  <a id="BelNytheraSeiche_WaveletMatrix_FMIndex_Serialize_" data-uid="BelNytheraSeiche.WaveletMatrix.FMIndex.Serialize*"></a>

  <h3 id="BelNytheraSeiche_WaveletMatrix_FMIndex_Serialize_BelNytheraSeiche_WaveletMatrix_FMIndex_System_IO_Stream_BelNytheraSeiche_WaveletMatrix_SerializationOptions_" data-uid="BelNytheraSeiche.WaveletMatrix.FMIndex.Serialize(BelNytheraSeiche.WaveletMatrix.FMIndex,System.IO.Stream,BelNytheraSeiche.WaveletMatrix.SerializationOptions)">
  Serialize(FMIndex, Stream, SerializationOptions?)
  <a class="header-action link-secondary" title="View source" href="https://github.com/belnytheraseiche/WaveletMatrix/blob/main/src/FMIndex.cs/#L232"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Serializes the <a class="xref" href="BelNytheraSeiche.WaveletMatrix.FMIndex.html">FMIndex</a> instance to a stream.
The data is compressed using Brotli and includes a checksum for integrity verification.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public static void Serialize(FMIndex obj, Stream stream, SerializationOptions? options = null)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>obj</code> <a class="xref" href="BelNytheraSeiche.WaveletMatrix.FMIndex.html">FMIndex</a></dt>
    <dd><p>The instance to serialize.</p>
</dd>
    <dt><code>stream</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.io.stream">Stream</a></dt>
    <dd><p>The stream to write the serialized data to.</p>
</dd>
    <dt><code>options</code> <a class="xref" href="BelNytheraSeiche.WaveletMatrix.SerializationOptions.html">SerializationOptions</a></dt>
    <dd><p>Serialization options, such as the compression level.
If null, <a class="xref" href="BelNytheraSeiche.WaveletMatrix.SerializationOptions.html#BelNytheraSeiche_WaveletMatrix_SerializationOptions_Default">Default</a> will be used.</p>
</dd>
  </dl>









  <h4 class="section">Exceptions</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.argumentnullexception">ArgumentNullException</a></dt>
    <dd><p>Thrown if <code class="paramref">obj</code> or <code class="paramref">stream</code> is null.</p>
</dd>
  </dl>



  <a id="BelNytheraSeiche_WaveletMatrix_FMIndex_Serialize_" data-uid="BelNytheraSeiche.WaveletMatrix.FMIndex.Serialize*"></a>

  <h3 id="BelNytheraSeiche_WaveletMatrix_FMIndex_Serialize_BelNytheraSeiche_WaveletMatrix_FMIndex_System_String_BelNytheraSeiche_WaveletMatrix_SerializationOptions_" data-uid="BelNytheraSeiche.WaveletMatrix.FMIndex.Serialize(BelNytheraSeiche.WaveletMatrix.FMIndex,System.String,BelNytheraSeiche.WaveletMatrix.SerializationOptions)">
  Serialize(FMIndex, string, SerializationOptions?)
  <a class="header-action link-secondary" title="View source" href="https://github.com/belnytheraseiche/WaveletMatrix/blob/main/src/FMIndex.cs/#L205"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Serializes the <a class="xref" href="BelNytheraSeiche.WaveletMatrix.FMIndex.html">FMIndex</a> instance to the specified file.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public static void Serialize(FMIndex obj, string file, SerializationOptions? options = null)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>obj</code> <a class="xref" href="BelNytheraSeiche.WaveletMatrix.FMIndex.html">FMIndex</a></dt>
    <dd><p>The instance to serialize.</p>
</dd>
    <dt><code>file</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.string">string</a></dt>
    <dd><p>The path of the file to write to.</p>
</dd>
    <dt><code>options</code> <a class="xref" href="BelNytheraSeiche.WaveletMatrix.SerializationOptions.html">SerializationOptions</a></dt>
    <dd><p>Serialization options, such as the compression level.
If null, <a class="xref" href="BelNytheraSeiche.WaveletMatrix.SerializationOptions.html#BelNytheraSeiche_WaveletMatrix_SerializationOptions_Default">Default</a> will be used.</p>
</dd>
  </dl>









  <h4 class="section">Exceptions</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.argumentnullexception">ArgumentNullException</a></dt>
    <dd><p>Thrown if <code class="paramref">obj</code> or <code class="paramref">file</code> is null.</p>
</dd>
  </dl>




</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/belnytheraseiche/WaveletMatrix/blob/main/src/FMIndex.cs/#L38" class="edit-link">Edit this page</a>
        </div>


      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>
